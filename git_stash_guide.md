

## In a nutshell
git stash は、作業中の変更を一時的に退避し、作業ディレクトリをクリーンな状態に戻すための Git のコマンド。
コミットせずに作業を保存し、ブランチの切り替えや別タスクへの対応を素早く行うことができる。


## はじめに

git stash を使えば、作業中の変更を一時的に保存し、安全に他の作業へ移ることができる。
本記事では、初学者向けに git stash の基本的な使い方と注意点、実務での利用例を紹介する。


## 予想される読み手
 - Git について，初学者である
 - `git stash` についてあまり分かっていない
 - Git を今後も利用する必要がある



## git stash とは

作業中の変更を一時的に退避（保存）して、作業ツリーをクリーンな状態に戻すためのコマンド。
例えば、 branch を切り替える必要があるが、現在の作業を commit したくないときに用いる．
よって，作業中のコードを commit せずに一時的に退避させたいときに便利。例えば、別の task が割りこんだり、バグ修正のために他の branch へ移動しなければならない場合、今の作業を中断して退避できる．



## 実務でのシチュエーション

- レビュー対応のために別の branch にすぐ切り替えたい
- ビルドやテストに失敗して、一旦原因を切り分けたい
- 作業 branch で中断したコードを一時的に退避し、他の task に集中したい
- 複数の作業を並行して行う必要があるとき



## 基本的な使い方

#### 作業内容を退避する
```bash
git stash
```
作業中の変更（ステージ済みと未ステージの両方）が退避され、作業ディレクトリが初期状態に戻る。


#### stash の一覧を表示
```bash
git stash list
```

#### 退避した作業を戻す（最新のもの）
```bash
git stash apply
```

#### 退避した作業を戻して削除
```bash
git stash pop
```

#### 特定の stash を戻す
```bash
git stash apply stash@{1}
```

#### stash を削除する
```bash
git stash drop stash@{0}
```

#### すべての stash を削除
```bash
git stash clear
```

#### 管理外のファイルも退避する
```bash
git stash -u
```

## 利点と欠点

### 利点

- すぐに作業を切り替えられる
- 作業の途中で commit 履歴を汚さずに済む
- 安全に作業を一時退避できる


### 欠点

- stash したまま忘れてしまうことがある
- 複数の stash があると管理が煩雑になる
- 一部の変更だけを選んで stash するのがやや面倒



## 代替案

- **WIP（Work In Progress） commit を作成する**
  - 一時的にローカルで commit して、後で修正・削除する
- ** branch を切って作業を避難させる**
  - 一時的な branch を作成して退避することで、より明確に状態を保存できる
- **git worktree を使って別の作業ツリーを作る**
  - stash に頼らず複数の作業状態を同時に扱うことができる


## 備考



## Summary

git stash は、作業の一時退避にとても便利な機能である。急な branch 移動や task の割り込みが多い実務では、頻繁に利用される．但し、使い方を誤ると忘れてしまったり、競合が発生することもある為、用途と代替手段を理解したうえで使い分けることが重要だと考えられる。

## References


