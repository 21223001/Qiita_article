## 背景

応用情報技術者試験の勉強をするにあたって，メールの送受信には，特定のプロトコルが用いられている事を知った．
なんでこれが必要なのか(覚える必要あるのか？)疑問に感じた為，調べた事を以下に纏めた．


## 要点

1. 昔は，メールを利用するためにSMTP/POP/IMAPの設定を手動で行う必要があったが，Webメールの普及により一般ユーザーはプロトコルを意識することなくメールを利用できるようになった．
2. APIベースのメール送受信やクラウドサービスの進化により，SMTPやIMAPを使わずにメールを送信・管理する選択肢が増えている．
3. SlackやMicrosoft Teamsのようなリアルタイムチャットツールの普及により，特定の用途ではメールの必要性が減少している．
4. それでも，企業やレガシーシステムではSMTP/IMAPが依然として広く利用されており，標準化されたメール通信手段としての役割を果たし続けている．
5. メールプロトコルは，通知システムやIoTデバイスのアラート送信，データ転送など，メール以外の用途でも活用されるケースがある．

完全になくなることはないが，今後はAPIやクラウドサービスへの移行がさらに進み，SMTP/IMAPの役割は次第に縮小していくと考えられる．


## メール送受信プロトコルの歴史と現代の代替技術

メールには，SMTP（Simple Mail Transfer Protocol）やPOP（Post Office Protocol），IMAP（Internet Message Access Protocol）といった専用のプロトコルが存在する．
これらは，送信と受信という異なる役割を果たすために設計された．
かつてはメールを利用するためにプロトコルを意識する必要があったが，現代ではその必要性が薄れてきている．


## メール送受信の仕組み

メールは「送信」と「受信」の2つのプロセスで成り立っている．
これに対応するため，それぞれに専用のプロトコルが用意されている．

### 送信プロトコル（SMTP）
SMTPは，メールを送信するためのプロトコルであり，メールクライアントが送信サーバーにメールを渡す際に使用される．
また，送信サーバー同士でメールを中継する際にも利用される．

### 受信プロトコル（POP・IMAP）
- **POP（Post Office Protocol）**: メールを一度ダウンロードし，ローカル環境に保存する．受信後にサーバー上のメールを削除することが基本だが，設定により残すことも可能．
- **IMAP（Internet Message Access Protocol）**: メールをサーバー上に保存し，クライアント側で同期する．複数デバイスで同じメールを管理するのに適している．



## かつてはプロトコルの設定が必要だった

かつてメールクライアントを利用するには，以下の情報を手動で入力する必要があった．

- SMTPサーバーアドレス（例: `smtp.example.com`）
- POP/IMAPサーバーアドレス（例: `pop.example.com` または `imap.example.com`）
- ポート番号（デフォルトまたはSSL/TLS用）
- 認証方式（パスワード認証，SSL/TLSの有無）
- 受信メールの削除ルール（POPの場合）

このため，一般ユーザーもメールプロトコルの基本知識を求められた．
しかし，1990年代後半からWebメールが普及し，プロトコルを意識せずに利用できる環境が整い始めた．



## 現代における代替技術

### Webメールの普及
1990年代後半から，**Yahoo!メール（1997年），Hotmail（1996年），Gmail（2004年）** などのWebメールが登場した．
これにより，ユーザーはWebブラウザを通じてメールを利用できるようになり，SMTPやPOP/IMAPの設定を意識する必要がなくなった．

### APIベースのメール送受信
近年では，SMTPやIMAPの代替としてAPIを利用するサービスが増えている．

- **Gmail API，Microsoft Graph API**
  - メール送受信をAPI経由で行える．
  - OAuth認証により，SMTPよりもセキュリティが高い．

- **SendGrid, Mailgun, Postmark などのクラウドメールサービス**
  - SMTPを使わず，REST APIを通じてメールを送信．
  - スパム対策や配信成功率の管理が容易．

### チャット・コラボレーションツールの台頭
メールの代替として，Slack，Microsoft Teams，Discordなどのチャットツールが普及している．
特に社内コミュニケーションにおいては，メールよりもリアルタイム性の高いツールが主流になりつつある．


## なぜ通常の通信とは異なるのか

メールはWebのHTTP/HTTPS通信とは異なり，非同期通信が基本となる．
そのため，特定のメールサーバーを介して送受信が行われ，以下のような違いがある．

- **送受信のタイミングの違い**
  - HTTPはクライアントがリクエストを送信し，サーバーが即座にレスポンスを返す．
  - メールは，送信者がSMTPを使ってメールを送信し，受信者がIMAPやPOPを使って別のタイミングで受け取る．

- **転送経路の違い**
  - HTTP通信は基本的にクライアントとサーバーの1対1の通信で完結する．
  - メールは複数のサーバーを経由して転送されることが多く，メール遅延やフィルタリングが発生することがある．

- **セキュリティの違い**
  - HTTP通信はSSL/TLSで暗号化されるが，メールは送信経路上で第三者に読み取られる可能性があるため，DKIM，SPF，DMARCなどの追加の認証技術が必要になる．




## それでもメールプロトコルが残る理由

- **レガシーシステムとの互換性**: 企業や政府機関では，依然としてSMTP/IMAPベースのメールシステムが使われている．
- **標準化された仕組み**: どのメールクライアントでも共通のプロトコルとして利用できる．
- **エンタープライズ向けのメール管理**: 企業は独自のメールサーバーを運用するケースがあり，外部APIを使わないこともある．


## メール送受信プロトコルの他用途での利用

メール送受信のために設計されたSMTP，IMAP，POPプロトコルは，基本的にはメール用途に特化しているが，以下のような場面で応用されることがある．

- **通知システム**
  - サーバーモニタリングツールやCI/CDシステムが，エラー通知やビルド完了通知をメールで送信する際にSMTPが利用される．

- **IoTデバイスのアラート送信**
  - 一部のIoTデバイスでは，SMTPを利用してアラートメールを送信する仕組みが組み込まれている．

- **メールゲートウェイとしての活用**
  - 企業のシステムでは，SMTPサーバーを通じて外部サービスとのデータ連携を行うケースがある．

- **ログ・データ収集**
  - 一部のセキュリティツールは，ログを定期的にメールで送信することで記録を残す用途にSMTPを活用する．

このように，メールの送受信に特化したプロトコルではあるが，通知・監視・データ転送など，他のシステムと連携する手段としても活用されている．




## 参照文献

Postel, J. (1982). Simple Mail Transfer Protocol. RFC 821 (最終閲覧日：2025年2月15日)
Crispin, M. (2003). Internet Message Access Protocol - Version 4rev1. RFC 3501 (最終閲覧日：2025年2月15日)
Google Developers. (n.d.). Gmail API Overview. https://developers.google.com/gmail/api (最終閲覧日：2025年2月15日)
Microsoft. (n.d.). Microsoft Graph API Overview. https://learn.microsoft.com/en-us/graph/ (最終閲覧日：2025年2月15日)
